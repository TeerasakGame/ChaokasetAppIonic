var fp={};fp.COOKIE="fp";fp._tracked=false;fp.track=function(e){if(this._tracked||!this._shouldTrack()){return true}fp._tracked=true;e=e||{};var t=this;var r=t._getCookieByName(t.COOKIE);var o={};var n=window.location.search;if(n){n=n.replace(/^\?/,"");var a=n.split("&");var i=a.length;for(var c=0;c<i;c++){var f=a[c].split("=");if(f[0]==="ref"&&f[1]){e.referrer=decodeURIComponent(f[1])}else if(f[0]==="cr"&&f[1]==="1"){e.countryRedirection=true}}}if(!e.countryRedirection&&r&&(e.referrer||document.referrer)){var s=e.referrer||document.referrer;var u=/^(https?:\/\/)?([\w\d\-]+\.)?iflix.com/gi;if(u.test(s)){return}}if(!r){o={cookieId:fp._getCookieId()}}else{try{var p=r.split("_");o={cookieId:p[0]}}catch(d){o={cookieId:fp._getCookieId()}}}var l=document.location.origin||document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:"");o.location=l+document.location.pathname;o.referrer=e.referrer||document.referrer;o.href=document.location.href;if(typeof navigator!="undefined"&&navigator.userAgent){o.userAgent=navigator.userAgent}var x=fp._getCookieByName("_ga");o.sessionId=x||null;var m=new Date;var v=365;m.setTime(m.getTime()+v*24*60*60*1e3);fp._update(o,function(e,t){if(e)return console.error(e.message);var r=t;var o=[fp.COOKIE+"="+r,"expires="+m.toGMTString(),"path=/","domain=.iflix.com"].join("; ");document.cookie=o});return true};fp._getCookieByName=function(e){if(!document.cookie)return null;var t="; "+document.cookie;var r=t.split("; "+e+"=");if(r.length==2){return r.pop().split(";").shift()}else{return null}};fp._getCookieId=function(){var e="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e=="x"?t:t&3|8;return r.toString(16)});return e};fp._shouldTrack=function(){return true};fp._update=function(e,t){var r="https://tu3bm205t1.execute-api.ap-northeast-1.amazonaws.com/stag/track";if(document){var o=document.location.hostname.indexOf("staging")!==-1||document.location.hostname.indexOf("testsite.iflix")!==-1||document.location.hostname.indexOf("dev.iflix")!==-1||document.location.hostname.indexOf("sit1-play.iflix")!==-1||document.location.hostname.indexOf("pp-play.iflix")!==-1;if(o){r="https://tu3bm205t1.execute-api.ap-northeast-1.amazonaws.com/stag/track"}else if(~location.hostname.indexOf(".iflix")){r="https://1xt828gvic.execute-api.ap-northeast-1.amazonaws.com/prod/track"}}var n=new XMLHttpRequest;n.open("POST",r,true);n.onload=function(){if(n.status>=200&&n.status<400){var e=JSON.parse(n.responseText);t(null,e.track_id)}else{t(new Error("Footprints error "+n.status))}};n.onerror=function(){t(new Error("Unknown footprints error."))};n.send(JSON.stringify(e))};fp.track();